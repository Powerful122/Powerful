<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeFi Content Approval Tool</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: auto; padding: 20px; background: #fdf9f3; color: #00346e; }
        h1 { color: #00346e; }
        button { background: #006fc6; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; }
        button:hover { background: #00418b; }
        .content-item { border: 1px solid #ddd; padding: 10px; margin: 10px 0; background: white; border-radius: 8px; }
        .preview { cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .approval { display: inline-block; margin-right: 10px; }
        .approval input[type="radio"] { display: none; }
        .approval label { padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        .approval #approve + label { background: #4caf50; color: white; } /* Green */
        .approval #disapprove + label { background: #f44336; color: white; } /* Red */
        .approval input:checked + label { border: 2px solid #333; }
        .comments { width: 100%; height: 50px; }
        .mockup { margin-top: 10px; }
        .mockup img { max-width: 100%; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); justify-content: center; align-items: center; z-index: 1000; }
        .overlay-content { background: white; padding: 20px; border-radius: 8px; max-width: 600px; overflow-y: auto; }
        .close { float: right; cursor: pointer; font-size: 20px; }
        .logo { width: 50px; vertical-align: middle; }
        .admin-only { display: none; } /* Hidden unless admin */
        #loading { text-align: center; }
    </style>
</head>
<body>
    <img src="brand-logo.png" alt="Brand Logo" class="logo">
    <h1>DeFi Content Approval</h1>
    <p>Welcome to the DeFi Content Approval Tool â€“ Streamlining your social media workflow with professional branding.</p>
    <button onclick="openCategoriesOverlay()">See Our Content Categories</button>
    <form id="add-form" class="admin-only">
        <textarea id="new-copy" placeholder="Write content copy here..." rows="4" style="width:100%;"></textarea>
        <input type="file" id="new-mockup-file" accept="image/*">
        <button type="submit">Add Content</button>
    </form>
    <div id="content-list"></div>
    <div id="loading">Loading...</div>

    <div id="post-overlay" class="overlay">
        <div class="overlay-content">
            <span class="close" onclick="closeOverlay()">&times;</span>
            <textarea id="full-copy" class="admin-only" style="width:100%;"></textarea>
            <p id="full-copy-view" style="display:none;"></p> <!-- For non-admin view -->
            <div class="approval">
                <input type="radio" id="approve" name="approval"><label for="approve">Approve</label>
                <input type="radio" id="disapprove" name="approval"><label for="disapprove">Disapprove</label>
            </div>
            <textarea class="comments" placeholder="Add comments..."></textarea>
            <div class="mockup">
                <img id="mockup-img" src="">
                <input type="file" id="mockup-file" accept="image/*">
                <button onclick="uploadMockup()">Upload Mockup</button>
            </div>
            <button class="admin-only" onclick="saveEdit()">Save Edit</button>
        </div>
    </div>

    <div id="categories-overlay" class="overlay">
        <div class="overlay-content">
            <span class="close" onclick="closeCategoriesOverlay()">&times;</span>
            <h2>Our Content Categories</h2>
            <p><strong>Marketing & Outreach Content</strong><br>This content is designed to attract, engage, and convert a broad audience.</p>
            <ul>
                <li><strong>Blog Posts / Articles:</strong>
                    <ul>
                        <li>Educational: "DeFi 101," "What is RWA Tokenization," or "How Lending Protocols Use Oracles."</li>
                        <li>SEO-Focused: Targeting high-volume search terms like "best DeFi yield" or "tokenized real estate platforms."</li>
                        <li>Thought Leadership: Commentary on market trends, regulatory changes, or the future of decentralized finance.</li>
                    </ul>
                </li>
                <li><strong>Social Media Posts (Tweets/X Posts, LinkedIn, Telegram):</strong>
                    <ul>
                        <li>Threads: Long-form, sequential posts breaking down complex protocol updates, tokenomics, or market analysis.</li>
                        <li>Daily Engagement: Short, punchy posts, questions, and replies to drive community interaction.</li>
                        <li>Visual Copy: Captions and headlines for infographics and short-form videos.</li>
                    </ul>
                </li>
                <li><strong>Website Copy / Landing Page Copy:</strong>
                    <ul>
                        <li>High-Conversion Text: Crafting the headlines, calls-to-action (CTAs), and benefits-focused paragraphs on your website (which you just built!).</li>
                        <li>About Us/Mission: Establishing brand authority and credibility.</li>
                    </ul>
                </li>
                <li><strong>Email Marketing:</strong>
                    <ul>
                        <li>Newsletters: Regular updates on protocol development, new features, and community announcements.</li>
                        <li>Lead Nurturing: Automated email sequences aimed at converting interested parties (e.g., "7 Days to Understanding Our DEX").</li>
                    </ul>
                </li>
            </ul>
            <p>ðŸ“š <strong>Technical & Educational Content</strong><br>This content requires deep subject-matter expertise and is crucial for building trust in the complex DeFi space.</p>
            <ul>
                <li>White Papers: Comprehensive, authoritative documents detailing the problem, solution, technology, and tokenomics of a protocol. (This is essential for serious protocols).</li>
                <li>Lite Papers/Pitch Decks: Shorter, less technical versions of the White Paper, focused on executive summaries and investment narratives.</li>
                <li>Documentation (Docs): Step-by-step guides, API references, and FAQs for developers, liquidity providers, and end-users on how to use the protocol.</li>
                <li>Protocol Mechanism Explanations: Clear articles or threads that explain complex features like collateralization ratios, governance models, or impermanent loss in plain language.</li>
                <li>Case Studies: Detailed reports showcasing a client's success, including the challenge, the strategy, and measurable results (like TVL growth or community expansion).</li>
            </ul>
            <p>ðŸ“¢ <strong>Promotional & Public Relations Content</strong><br>This content focuses on getting the brand noticed and positioning leaders as experts.</p>
            <ul>
                <li>Press Releases: Formal announcements for major milestones (e.g., launching a new token, closing a funding round, or listing on an exchange).</li>
                <li>Q&A/AMA Scripts: Preparing founders or developers with clear, concise answers for live streams or Ask-Me-Anything sessions.</li>
                <li>Interview Scripts/Talking Points: Drafting key messaging for media interviews, podcasts, or conference appearances.</li>
                <li>Video Scripts: Writing scripts for explainer videos, animated tutorials, and founder addresses.</li>
            </ul>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/12.3.0/firebase-app.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/12.3.0/firebase-firestore.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/12.3.0/firebase-storage.min.js"></script>

    <script>
        // Paste your Firebase config here
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage();
        const collection = db.collection('contents');

        const isAdmin = new URLSearchParams(window.location.search).get('admin') === 'true';
        if (isAdmin) {
            document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'block');
        }

        const list = document.getElementById('content-list');
        const loading = document.getElementById('loading');
        const postOverlay = document.getElementById('post-overlay');
        const fullCopy = document.getElementById('full-copy');
        const fullCopyView = document.getElementById('full-copy-view');
        const approve = document.getElementById('approve');
        const disapprove = document.getElementById('disapprove');
        const comments = document.querySelector('.comments');
        const mockupImg = document.getElementById('mockup-img');
        const mockupFile = document.getElementById('mockup-file');
        let currentDoc = null;

        // Real-time listener
        collection.orderBy('createdAt', 'desc').onSnapshot(snapshot => {
            list.innerHTML = '';
            snapshot.forEach(doc => {
                const item = doc.data();
                const div = document.createElement('div');
                div.className = 'content-item';
                div.innerHTML = `
                    <div class="preview" onclick="openOverlay('${doc.id}')">${item.copy.substring(0, 100)}...</div>
                    ${isAdmin ? `<button onclick="deleteItem('${doc.id}')">Delete</button>` : ''}
                `;
                list.appendChild(div);
            });
            loading.style.display = 'none';
        }, err => console.error(err));

        function openOverlay(id) {
            currentDoc = collection.doc(id);
            currentDoc.get().then(doc => {
                const item = doc.data();
                if (isAdmin) {
                    fullCopy.value = item.copy;
                    fullCopy.style.display = 'block';
                    fullCopyView.style.display = 'none';
                } else {
                    fullCopyView.textContent = item.copy;
                    fullCopyView.style.display = 'block';
                    fullCopy.style.display = 'none';
                }
                approve.checked = item.approved === 'approve';
                disapprove.checked = item.approved === 'disapprove';
                comments.value = item.comments || '';
                mockupImg.src = item.mockupUrl || '';
                postOverlay.style.display = 'flex';
            });
        }

        function closeOverlay() {
            postOverlay.style.display = 'none';
            currentDoc = null;
        }

        postOverlay.addEventListener('click', (e) => {
            if (e.target === postOverlay) closeOverlay();
        });

        approve.addEventListener('change', saveChanges);
        disapprove.addEventListener('change', saveChanges);
        comments.addEventListener('input', saveChanges);

        function saveChanges() {
            if (!currentDoc) return;
            const updates = {
                approved: approve.checked ? 'approve' : (disapprove.checked ? 'disapprove' : ''),
                comments: comments.value
            };
            if (isAdmin) {
                updates.copy = fullCopy.value;
            }
            currentDoc.update(updates).catch(err => console.error(err));
        }

        function saveEdit() {
            saveChanges();
        }

        function deleteItem(id) {
            if (confirm('Delete this item?')) {
                collection.doc(id).delete();
            }
        }

        function uploadMockup() {
            const file = mockupFile.files[0];
            if (!file || !currentDoc) return;
            const ref = storage.ref(`mockups/${currentDoc.id}`);
            ref.put(file).then(() => {
                ref.getDownloadURL().then(url => {
                    currentDoc.update({ mockupUrl: url });
                    mockupImg.src = url;
                });
            }).catch(err => console.error(err));
        }

        document.getElementById('add-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const copy = document.getElementById('new-copy').value;
            if (!copy) return;
            collection.add({
                copy,
                approved: '',
                comments: '',
                mockupUrl: '',
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            }).then(docRef => {
                const file = document.getElementById('new-mockup-file').files[0];
                if (file) {
                    const ref = storage.ref(`mockups/${docRef.id}`);
                    ref.put(file).then(() => {
                        ref.getDownloadURL().then(url => docRef.update({ mockupUrl: url }));
                    });
                }
                document.getElementById('new-copy').value = '';
                document.getElementById('new-mockup-file').value = '';
            });
        });

        function openCategoriesOverlay() {
            document.getElementById('categories-overlay').style.display = 'flex';
        }

        function closeCategoriesOverlay() {
            document.getElementById('categories-overlay').style.display = 'none';
        }
    </script>
</body>
</html>
